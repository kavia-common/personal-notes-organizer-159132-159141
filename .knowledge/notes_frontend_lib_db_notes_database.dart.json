{"is_source_file": true, "format": "Dart", "description": "This Dart file implements a singleton class 'NotesDatabase' managing local SQLite database operations for a notes app. It includes methods for opening the database, retrieving notes with optional search filtering, inserting, updating, deleting, and fetching individual notes, as well as closing the database connection. The class coordinates database setup and CRUD operations for 'notes' stored in the SQLite database.", "external_files": ["../models/note.dart"], "external_methods": ["getDatabasesPath()", "openDatabase()", "Note.fromMap", "Note.copyWith"], "published": ["NotesDatabase"], "classes": [{"name": "NotesDatabase", "description": "Singleton class providing access and operations for the local notes database."}], "methods": [{"name": "get database", "description": "Getter that initializes and returns the singleton Database instance asynchronously."}, {"name": "_openDb", "description": "Private method that sets up the database file, creates the table, and adds an index if necessary."}, {"name": "getNotes", "description": "Fetches all notes, optionally filtered by a search query, ordered by 'updated_at' descending."}, {"name": "insertNote", "description": "Inserts a new note into the database and returns the Note object with assigned ID."}, {"name": "updateNote", "description": "Updates an existing note in the database; requires note.id to be non-null."}, {"name": "deleteNote", "description": "Deletes a note by its ID."}, {"name": "getNoteById", "description": "Retrieves a single note by its ID, returns null if not found."}, {"name": "close", "description": "Closes the database connection gracefully."}], "calls": ["getDatabasesPath()", "openDatabase()", "Note.fromMap", "Note.copyWith", "db.query", "db.execute", "db.insert", "db.update", "db.delete"], "search-terms": ["NotesDatabase", "notes_app.db", "Note.fromMap", "getNotes", "insertNote", "updateNote", "deleteNote", "getNoteById"], "state": 2, "file_id": 20, "knowledge_revision": 43, "git_revision": "", "hash": "f4c7803fb75794b7f2f9507bc3d7139c", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/lib/db/notes_database.dart", "revision_history": [{"43": ""}]}